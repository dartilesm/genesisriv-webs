---
import AboutAlt from "@/components/about-alt.astro";
import CertificatesAlt from "@/components/certificates-alt.astro";
import ExperienceAlt from "@/components/experience-alt.astro";
import PresentationAlt from "@/components/presentation-alt.astro";
import Projects from "@/components/projects.astro";
import Testimonials from "@/components/testimonials.astro";
import RootLayout from "@/layouts/root-layout.astro";
import { loadQuery } from "@/utils/sanity-load-query";
import type { Metadata, Portfolio } from "@sanity-app/sanity.types";

const {
  data: [siteData],
} = await loadQuery<Portfolio[]>({
  query: `*[_type == "portfolio"]`,
});

const {
  data: [, portfolioMetadata],
} = await loadQuery<Metadata[]>({
  query: `*[_type == "metadata"]`,
});
---

<RootLayout metadata={portfolioMetadata} headerData={siteData.header}>
  <PresentationAlt data={siteData.presentation} />
  <Projects data={siteData.projects} />
  <ExperienceAlt data={siteData.experience} />
  <AboutAlt data={siteData.about} />
  <CertificatesAlt data={siteData.certificates} />
  <Testimonials data={siteData.testimonials} />
</RootLayout>
