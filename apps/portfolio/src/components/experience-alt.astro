---
import { Portfolio } from "@/types";
import { PortableText } from "astro-portabletext";
import type { TypedObject } from "astro-portabletext/types";
import Container from "./ui/container.astro";
import Section from "./ui/section.astro";

type Props = {
  data: Portfolio["experience"];
};

const { data } = Astro.props;
---

<Section
  id='experience'
  heading={data?.title}
  description={data?.description}
  class='w-full py-20 md:py-24 lg:py-32 relative [box-shadow:_0_0px_0px_1px_rgba(0,0,0,0.1)]'
>
  <Container>
    <div class='grid lg:grid-cols-[1fr_300px] gap-8 items-start'>
      <ol class='relative border-s-2 border-purple-200 ms-3 space-y-12'>
        {
          data?.experienceList?.map((experience) => (
            <li class='ms-8 group'>
              <span class='absolute flex items-center justify-center w-6 h-6 bg-purple-100 rounded-full -start-3 ring-8 ring-white dark:ring-gray-900 dark:bg-purple-900 group-hover:bg-purple-200 dark:group-hover:bg-purple-800 transition-colors'>
                <svg
                  class='w-2.5 h-2.5 text-purple-800 dark:text-purple-300'
                  aria-hidden='true'
                  xmlns='http://www.w3.org/2000/svg'
                  fill='currentColor'
                  viewBox='0 0 20 20'
                >
                  <path d='M20 4a2 2 0 0 0-2-2h-2V1a1 1 0 0 0-2 0v1h-3V1a1 1 0 0 0-2 0v1H6V1a1 1 0 0 0-2 0v1H2a2 2 0 0 0-2 2v2h20V4ZM0 18a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8H0v10Zm5-8h10a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z' />
                </svg>
              </span>
              <div class='p-4 bg-white/50 dark:bg-gray-900/50 rounded-lg backdrop-blur-sm border border-purple-100 dark:border-purple-900 group-hover:border-purple-200 dark:group-hover:border-purple-800 transition-colors'>
                <time class='mb-1 text-sm font-normal leading-none text-purple-600 dark:text-purple-400'>
                  {experience.time}
                </time>
                <h3 class='text-lg font-semibold text-gray-900 dark:text-white mt-2'>
                  {experience.role}
                </h3>
                <p class='mb-4 text-base font-normal text-gray-500 dark:text-gray-400'>
                  {experience.subtitle}
                </p>
                <div class='text-gray-700 dark:text-gray-300 [&>p]:mb-4 [&>p:last-child]:mb-0'>
                  <PortableText value={experience.description as unknown as TypedObject} />
                </div>
              </div>
            </li>
          ))
        }
      </ol>

      <div class='hidden lg:block sticky top-24'>
        <div class='relative'>
          <svg
            xmlns='http://www.w3.org/2000/svg'
            class='w-full h-auto text-purple-600/20 dark:text-purple-300/10'
            viewBox='0 0 24 24'
            stroke-width='1'
            stroke='currentColor'
            fill='none'
            stroke-linecap='round'
            stroke-linejoin='round'
          >
            <path stroke='none' d='M0 0h24v24H0z' fill='none'></path>
            <path d='M3 12h1m8 -9v1m8 8h1m-15.4 -6.4l.7 .7m12.1 -.7l-.7 .7'></path>
            <path d='M9 16a5 5 0 1 1 6 0a3.5 3.5 0 0 0 -1 3a2 2 0 0 1 -4 0a3.5 3.5 0 0 0 -1 -3'
            ></path>
            <path d='M9.7 17l4.6 0'></path>
          </svg>
          <div
            class='absolute inset-0 bg-gradient-to-t from-white via-white/0 to-white/0 dark:from-gray-900 dark:via-gray-900/0 dark:to-gray-900/0'
          >
          </div>
        </div>
        <div class='mt-8 space-y-4'>
          <p class='text-sm text-gray-500 dark:text-gray-400 italic text-center'>
            "The only way to do great work is to love what you do."
          </p>
          <p class='text-sm text-gray-400 dark:text-gray-500 text-center'>- Steve Jobs</p>
        </div>
      </div>
    </div>
  </Container>
  <div
    class='absolute h-full w-full bg-purple-400 bg-clip-padding backdrop-filter backdrop-blur-sm bg-opacity-10
    -z-10 top-0 left-0'
  >
  </div>
  <div
    class='absolute inset-0 -z-10 h-full w-full bg-[linear-gradient(to_right,#8080800a_1px,transparent_1px),linear-gradient(to_bottom,#8080800a_1px,transparent_1px)] bg-[size:14px_24px]'
  >
    <div
      class='absolute left-0 right-0 top-0 -z-10 m-auto h-[310px] w-[310px] bg-fuchsia-400 opacity-20 blur-[100px]'
    >
    </div>
  </div>
</Section>
