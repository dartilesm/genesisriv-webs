---
import ButtonListAlt from "@/components/button-list-alt.astro";
import ProfileAlt from "@/components/profile-alt.astro";
import RootLayout from "@/layouts/root-layout.astro";
import { loadQuery } from "@/utils/sanity-load-query";
import type { LinkTree, Metadata } from "@sanity-app/sanity.types";

const {
  data: [siteData],
} = await loadQuery<LinkTree[]>({
  query: `*[_type == "linkTree"]`,
});

const {
  data: [linkTreeMetadata],
} = await loadQuery<Metadata[]>({
  query: `*[_type == "metadata"]`,
});
---

<RootLayout className='space-y-8 py-12' metadata={linkTreeMetadata}>
  <ProfileAlt data={siteData} />

  {/* Main Links */}
  <div class='space-y-3 flex flex-col gap-2'>
    <ButtonListAlt links={siteData?.links} />
  </div>
</RootLayout>
